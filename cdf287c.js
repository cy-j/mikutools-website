(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1147:function(n,t,e){"use strict";e(38),e(39),e(19);var o=e(218).MD5;t.a=function(){return o(Math.random().toString()).toString()}},1148:function(n,t,e){"use strict";e(19);t.a=function(n){return new Promise((function(t,e){var o=new FileReader;o.readAsDataURL(n),o.onload=function(){return t(o.result)},o.onerror=function(n){return e(n)}}))}},1199:function(n,t){},1200:function(n,t){},1201:function(n,t){},1241:function(n,t,e){var content=e(2288);"string"==typeof content&&(content=[[n.i,content,""]]),content.locals&&(n.exports=content.locals);(0,e(12).default)("6ec7eeda",content,!0,{sourceMap:!1})},2257:function(n,t,e){n.exports=e.p+"img/0.66d86b3.png"},2258:function(n,t,e){n.exports=e.p+"img/1.1d20340.png"},2259:function(n,t,e){n.exports=e.p+"img/2.c470911.png"},2260:function(n,t,e){n.exports=e.p+"img/3.3b5de64.png"},2261:function(n,t,e){n.exports=e.p+"img/4.ec19f72.png"},2262:function(n,t,e){n.exports=e.p+"img/5.d80686b.png"},2263:function(n,t,e){n.exports=e.p+"img/6.5b2cbc2.png"},2264:function(n,t,e){n.exports=e.p+"img/7.8d3b5ff.png"},2265:function(n,t,e){n.exports=e.p+"img/8.5c02656.png"},2266:function(n,t,e){n.exports=e.p+"img/9.bb2dcf4.png"},2267:function(n,t,e){n.exports=e.p+"img/10.7af3648.png"},2268:function(n,t,e){n.exports=e.p+"img/11.9afe534.png"},2269:function(n,t,e){n.exports=e.p+"img/12.5f351a5.png"},2270:function(n,t,e){n.exports=e.p+"img/13.b397722.png"},2271:function(n,t,e){n.exports=e.p+"img/14.2565cab.png"},2272:function(n,t,e){n.exports=e.p+"img/15.ef595d0.png"},2273:function(n,t,e){n.exports=e.p+"img/16.0e34475.png"},2274:function(n,t,e){n.exports=e.p+"img/17.73e51fc.png"},2275:function(n,t,e){n.exports=e.p+"img/18.2aa172e.png"},2276:function(n,t,e){n.exports=e.p+"img/19.bc8be8c.png"},2277:function(n,t,e){n.exports=e.p+"img/20.cd3097d.png"},2278:function(n,t,e){n.exports=e.p+"img/21.e6cf3b9.png"},2279:function(n,t,e){n.exports=e.p+"img/22.7880c72.png"},2280:function(n,t,e){n.exports=e.p+"img/23.2cc2bf5.png"},2281:function(n,t,e){n.exports=e.p+"img/24.e9ddb62.png"},2282:function(n,t,e){n.exports=e.p+"img/25.1663a2c.png"},2283:function(n,t,e){n.exports=e.p+"img/26.a980ed6.png"},2284:function(n,t,e){n.exports=e.p+"img/27.a261c60.png"},2285:function(n,t,e){n.exports=e.p+"img/28.ab94cf5.png"},2286:function(n,t,e){n.exports=e.p+"img/29.8a0c60c.png"},2287:function(n,t,e){"use strict";var o=e(1241);e.n(o).a},2288:function(n,t,e){(t=e(11)(!1)).push([n.i,".christmas_hat .el-select-dropdown .preview{display:flex;justify-content:space-between;align-content:center}.christmas_hat .el-select-dropdown .preview .el-image+div{line-height:3.125rem}.christmas_hat .el-select-dropdown .el-select-dropdown__item{height:4.375rem;padding-top:.625rem;padding-bottom:.625rem}.christmas_hat .el-select-dropdown .el-select-dropdown__item img{width:auto;height:3.125rem}",""]),n.exports=t},2798:function(n,t,e){"use strict";e.r(t);e(19);var o=e(1198),c=e(301),r=e(1147),l=e(1148),f={name:"ChristmasHat",data:function(){return{n:null,src:[e(2257),e(2258),e(2259),e(2260),e(2261),e(2262),e(2263),e(2264),e(2265),e(2266),e(2267),e(2268),e(2269),e(2270),e(2271),e(2272),e(2273),e(2274),e(2275),e(2276),e(2277),e(2278),e(2279),e(2280),e(2281),e(2282),e(2283),e(2284),e(2285),e(2286)],style:0,logo:null,backgroundImage:null,canvas:null}},head:function(){return this.$store.state.currentTool.head},watch:{style:function(){this.n&&this.renderCanvas()}},mounted:function(){this.canvas=new o.fabric.Canvas(this.$refs.canvas)},methods:{handleChange:function(n){var t=this,e=n.target.files;if(!e.length)return!1;var o=e[0];Object(l.a)(o).then((function(n){var image=new Image;image.onload=function(){t.backgroundImage=image,t.$nextTick(t.renderCanvas)},image.src=n}))},renderCanvas:function(){var n=this;this.canvas.clear();var image=this.backgroundImage,t=this.$refs.box.offsetWidth,e=1;image.width>t?(this.canvas.setWidth(t),this.canvas.setHeight(t/image.width*image.height),e=t/image.width):(this.canvas.setWidth(image.width),this.canvas.setHeight(image.height)),this.getLogo().then((function(){var e=image.width/2/n.logo.width;image.width>t&&(e=t/2/n.logo.width);var c=new o.fabric.Image(n.logo,{scaleX:e,scaleY:e,left:0,top:0});n.canvas.add(c),c.centerH(),n.canvas.renderAll()}));var c=new o.fabric.Image(image,{scaleX:e,scaleY:e,left:0,top:0,selectable:!1});this.canvas.setBackgroundImage(c)},getLogo:function(){var n=this;return new Promise((function(t,e){var image=new Image;image.crossOrigin="anonymous",image.onload=function(){n.logo=image,t(image)},image.onerror=e,image.src=n.src[n.style]}))},save:function(){if(!this.n)return!1;Object(c.a)(this.canvas.toDataURL(),"".concat(Object(r.a)(),".png"))}}},d=(e(2287),e(7)),component=Object(d.a)(f,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"christmas_hat"},[e("nya-container",{attrs:{title:"在线加圣诞帽"}},[e("div",{staticClass:"nya-subtitle"},[n._v("\n            请选择要制作的图片\n        ")]),e("el-input",{attrs:{type:"file",accept:"image/*",placeholder:n.n?n.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件",clearable:""},nativeOn:{change:function(t){return n.handleChange(t)}},model:{value:n.n,callback:function(t){n.n=t},expression:"n"}},[e("el-button",{attrs:{slot:"append"},on:{click:n.save},slot:"append"},[n._v("\n                下载\n            ")])],1),e("div",{staticClass:"nya-subtitle mt-15"},[n._v("\n            选择圣诞帽样式\n        ")]),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-append-to-body":!1},model:{value:n.style,callback:function(t){n.style=t},expression:"style"}},n._l(n.src,(function(t,o){return e("el-option",{key:o,attrs:{label:"样式："+(o+1),value:o}},[e("div",{staticClass:"preview"},[e("el-image",{attrs:{src:n.src[o],fit:"contain"}}),e("div",[n._v(n._s("样式："+(o+1)))])],1)])})),1)],1),e("nya-container",{directives:[{name:"show",rawName:"v-show",value:n.n,expression:"n"}],attrs:{title:"预览"}},[e("div",{ref:"box",staticClass:"box"},[e("canvas",{ref:"canvas"})])])],1)}),[],!1,null,null,null);t.default=component.exports}}]);