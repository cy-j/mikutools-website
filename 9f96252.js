(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{1147:function(n,t,e){"use strict";e(38),e(39),e(19);var r=e(218).MD5;t.a=function(){return r(Math.random().toString()).toString()}},1148:function(n,t,e){"use strict";e(19);t.a=function(n){return new Promise((function(t,e){var r=new FileReader;r.readAsDataURL(n),r.onload=function(){return t(r.result)},r.onerror=function(n){return e(n)}}))}},1199:function(n,t){},1200:function(n,t){},1201:function(n,t){},2874:function(n,t,e){"use strict";e.r(t);e(19);var r=e(1198),o=e(301),c=e(1147),l=e(1148),h={name:"Ruyao",data:function(){return{n:null,logo:null,backgroundImage:null,canvas:null}},head:function(){return this.$store.state.currentTool.head},mounted:function(){this.canvas=new r.fabric.Canvas(this.$refs.canvas)},methods:{handleChange:function(n){var t=this,e=n.target.files;if(!e.length)return!1;var r=e[0];Object(l.a)(r).then((function(n){var image=new Image;image.onload=function(){t.backgroundImage=image,t.$nextTick(t.renderCanvas)},image.src=n}))},renderCanvas:function(){var n=this;this.canvas.clear();var image=this.backgroundImage,t=this.$refs.box.offsetWidth,e=1;image.width>t?(this.canvas.setWidth(t),this.canvas.setHeight(t/image.width*image.height),e=t/image.width):(this.canvas.setWidth(image.width),this.canvas.setHeight(image.height)),this.getLogo().then((function(){var e=image.width/2/n.logo.width;image.width>t&&(e=t/2/n.logo.width);var o=new r.fabric.Image(n.logo,{scaleX:e,scaleY:e,left:0,top:0});n.canvas.add(o),o.centerH(),n.canvas.renderAll()}));var o=new r.fabric.Image(image,{scaleX:e,scaleY:e,left:0,top:0,selectable:!1});this.canvas.setBackgroundImage(o)},getLogo:function(){var n=this;return new Promise((function(t,e){var image=new Image;image.onload=function(){n.logo=image,t(image)},image.onerror=e,image.src="/images/ruyao.png"}))},save:function(){if(!this.n)return!1;Object(o.a)(this.canvas.toDataURL(),"".concat(Object(c.a)(),".png"))}}},f=e(7),component=Object(f.a)(h,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"ruyao"},[e("nya-container",{attrs:{title:"乳摇图片制作"}},[e("div",{staticClass:"nya-subtitle"},[n._v("\n            请选择要制作的图片\n        ")]),e("el-input",{attrs:{type:"file",accept:"image/*",placeholder:n.n?n.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件"},nativeOn:{change:function(t){return n.handleChange(t)}},model:{value:n.n,callback:function(t){n.n=t},expression:"n"}},[e("el-button",{attrs:{slot:"append"},on:{click:n.save},slot:"append"},[n._v("\n                保存\n            ")])],1)],1),e("nya-container",{directives:[{name:"show",rawName:"v-show",value:n.n,expression:"n"}],attrs:{title:"预览"}},[e("div",{ref:"box",staticClass:"box"},[e("canvas",{ref:"canvas"})])]),e("nya-container",{attrs:{title:"使用方法"}},[e("ul",{staticClass:"nya-list"},[e("li",[e("a",{attrs:{href:"/images/ruyao_demo.jpg",target:"_blank",rel:"noopener noreferrer"}},[n._v("点击这里")]),n._v(" 打开图片后晃动手机，即可看到中间一块区域会晃动")])])])],1)}),[],!1,null,null,null);t.default=component.exports}}]);